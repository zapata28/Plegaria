<!-- ================= HERO CAROUSEL ================= -->
<section
  class="hero-carousel"
  (mouseenter)="pauseAutoplay()"
  (mouseleave)="resumeAutoplay()"
  (touchstart)="pauseAutoplay()"
  (touchend)="resumeAutoplay()"
>
  <div
    class="slide"
    *ngFor="let slide of slides; let i = index"
    [class.active]="i === currentSlide"
    [style.backgroundImage]="'url(' + slide.image + ')'"
  >
    <div class="content">
      <h1>{{ slide.title }}</h1>
      <p>{{ slide.text }}</p>
      <button type="button">{{ slide.button }}</button>
    </div>
  </div>

  <div class="dots">
    <span
      class="dot"
      *ngFor="let slide of slides; let i = index"
      [class.active]="i === currentSlide"
      (click)="goToSlide(i)"
    ></span>
  </div>
</section>

<!-- ================= NOVEDADES ================= -->
<section class="section-title">
  <h2>NOVEDADES</h2>
</section>

<section class="novedades-container">
  <div *ngIf="loadingNovedades" style="padding: 10px 20px;">
    Cargando novedades...
  </div>

  <div class="novedades-grid" *ngIf="!loadingNovedades">
    <article
      class="producto-card"
      *ngFor="let p of novedades"
      (click)="verProducto(p.id)"
    >
      <div class="producto-img">
        <img [src]="p.imagen || 'img/placeholder.png'" [alt]="p.nombre" />
        <span class="badge badge-nuevo" *ngIf="p.es_nuevo">Nuevo</span>
        <span class="badge badge-oferta" *ngIf="p.en_oferta">Oferta</span>
      </div>

      <div class="producto-info">
        <h3>{{ p.nombre }}</h3>
        <p class="desc">{{ p.descripcion }}</p>

        <div class="precio-row">
          <div class="precios">
            <span class="precio">{{ p.precio | currency:'COP':'symbol':'1.0-0' }}</span>
            <span class="precio-antes" *ngIf="p.en_oferta && p.precio_antes">
              {{ p.precio_antes | currency:'COP':'symbol':'1.0-0' }}
            </span>
          </div>

          <!-- ✅ Botones -->
          <div class="acciones">
            <button
              class="btn-add"
              type="button"
              (click)="addToCart(p); $event.stopPropagation()"
            >
              Agregar
            </button>

            <button
              class="btn-ver"
              type="button"
              (click)="verProducto(p.id); $event.stopPropagation()"
            >
              Ver
            </button>
          </div>
        </div>
      </div>
    </article>
  </div>
</section>

<!-- ================= CATEGORÍAS ================= -->
<section class="categoria-container">
  <div class="horizontal-scroll">
    <div class="card" *ngFor="let item of categorias" (click)="irACategoria(item.slug)">
      <img [src]="item.img" [alt]="item.name" />
      <div class="card-info">
        <span class="text">{{ item.name }}</span>
      </div>
    </div>
  </div>
  <div class="franja"></div>
</section>

<!-- ================= ADMIN TEMP (PRUEBA) ================= -->
<section style="padding: 10px 20px;">
  <h3>Admin (prueba)</h3>

  <input type="file" accept="image/*" (change)="onFileChange($event)" />
  <p *ngIf="uploadBusy">Subiendo imagen...</p>

  <p *ngIf="ultimaUrlImagen">
    ✅ Imagen lista:
    <a [href]="ultimaUrlImagen" target="_blank">Ver</a>
  </p>

  <button
    type="button"
    (click)="guardarProductoDemo()"
    [disabled]="!ultimaUrlImagen || uploadBusy"
  >
    Guardar producto demo
  </button>
</section>
